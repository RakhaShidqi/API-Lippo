<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5">
  <title>Import Data Revenue Lippo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="/css/style.css">

</head>
<body>
  <div class="container-custom">
    
    <!-- Header dengan Logo -->
    <div class="d-flex align-items-center justify-content-between mb-3 text-white">
      <h4 class="mb-0"><i class="bi bi-building"></i> Lippo Revenue Manager</h4>
      <button class="btn btn-sm logout-btn px-3" onclick="handleLogout()">
        <i class="bi bi-box-arrow-right"></i> Logout
      </button>
    </div>

    <!-- Upload Card -->
    <div class="card">
      <div class="card-header">
        <i class="bi bi-cloud-upload"></i> Import File
      </div>
      <div class="card-body">
        <form action="/hypernet-lippo/upload" method="post" enctype="multipart/form-data" id="uploadForm">
          <div class="upload-section">
            <div class="row g-2 align-items-end">
              <div class="col-12 col-md-8">
                <label class="form-label">Pilih File Excel/CSV</label>
                <input type="file" name="file" class="form-control" accept=".csv,.xlsx,.xls" required>
              </div>
              <div class="col-12 col-md-4">
                <button type="submit" class="btn btn-primary w-100">
                  <i class="bi bi-upload"></i> Upload
                </button>
              </div>
            </div>
            <small class="text-muted d-block mt-2">
              <i class="bi bi-info-circle"></i> Format: .csv, .xlsx, .xls (max 10MB)
            </small>
          </div>
        </form>
      </div>
    </div>

    <!-- Form Input Card -->
    <div class="card">
      <div class="card-header">
        <i class="bi bi-pencil-square"></i> Input Manual
      </div>
      <div class="card-body">
        <form id="lippoForm">
          
          <!-- Basic Info Accordion -->
          <div class="accordion" id="basicInfoAccordion">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBasic">
                  <i class="bi bi-info-circle me-2"></i> Basic Information
                </button>
              </h2>
              <div id="collapseBasic" class="accordion-collapse collapse show" data-bs-parent="#basicInfoAccordion">
                <div class="accordion-body">
                  <div class="row g-2">
                    <div class="col-sm-6 col-md-4 col-lg-3">
                      <label class="form-label">Unique Key</label>
                      <input type="text" class="form-control form-control-sm" id="unique-id" placeholder="Unique Key">
                    </div>
                    <div class="col-sm-6 col-md-4 col-lg-3">
                      <label class="form-label">ID Customer</label>
                      <input type="text" class="form-control form-control-sm" id="id-customer" placeholder="ID Cust">
                    </div>
                    <div class="col-sm-6 col-md-4 col-lg-3">
                      <label class="form-label">Customer Name</label>
                      <input type="text" class="form-control form-control-sm" id="customer-name" placeholder="Nama">
                    </div>
                    <div class="col-sm-6 col-md-4 col-lg-3">
                      <label class="form-label">Tenant Name</label>
                      <input type="text" class="form-control form-control-sm" id="tenant-name" placeholder="Tenant">
                    </div>
                    <div class="col-sm-6 col-md-5">
                      <label class="form-label">Mall Name</label>
                      <input type="text" class="form-control form-control-sm" id="mall-name" placeholder="Mall">
                    </div>
                    <div class="col-sm-6 col-md-7">
                      <label class="form-label">Ship Address</label>
                      <input type="text" class="form-control form-control-sm" id="ship-address" placeholder="Alamat">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Installation Accordion -->
          <div class="accordion mt-2" id="installationAccordion">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstall">
                  <i class="bi bi-gear me-2"></i> Installation
                </button>
              </h2>
              <div id="collapseInstall" class="accordion-collapse collapse" data-bs-parent="#installationAccordion">
                <div class="accordion-body">
                  <div class="row g-2">
                    <div class="col-6 col-md-4">
                      <label class="form-label">Tgl WO</label>
                      <input type="date" class="form-control form-control-sm" id="tgl-wo-address-request">
                    </div>
                    <div class="col-6 col-md-4">
                      <label class="form-label">BAST Date</label>
                      <input type="date" class="form-control form-control-sm" id="bast-date">
                    </div>
                    <div class="col-6 col-md-4">
                      <label class="form-label">Status</label>
                      <select class="form-select form-select-sm" id="status">
                        <option value="">Pilih</option>
                        <option value="Posted">Posted</option>
                        <option value="Not Posted">Not Posted</option>
                      </select>
                    </div>
                    <div class="col-6 col-md-3">
                      <label class="form-label">Start Date</label>
                      <input type="date" class="form-control form-control-sm" id="start">
                    </div>
                    <div class="col-6 col-md-3">
                      <label class="form-label">End Date</label>
                      <input type="date" class="form-control form-control-sm" id="end">
                    </div>
                    <div class="col-6 col-md-3">
                      <label class="form-label">Period (mo)</label>
                      <input type="number" class="form-control form-control-sm" id="period" placeholder="12">
                    </div>
                    <div class="col-6 col-md-3">
                      <label class="form-label">Price/Month</label>
                      <input type="number" class="form-control form-control-sm" id="price-per-month" placeholder="499000">
                    </div>
                    <div class="col-12">
                      <label class="form-label">Status Payment</label>
                      <select class="form-select form-select-sm" id="status-payment">
                        <option value="">Pilih</option>
                        <option value="Paid">Paid</option>
                        <option value="Unpaid">Unpaid</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Revenue Accordion -->
          <div class="accordion mt-2" id="revenueAccordion">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseRev">
                  <i class="bi bi-cash-coin me-2"></i> Revenue Share
                </button>
              </h2>
              <div id="collapseRev" class="accordion-collapse collapse" data-bs-parent="#revenueAccordion">
                <div class="accordion-body">
                  <div class="row g-2">
                    <div class="col-md-6">
                      <label class="form-label">Rev LMI</label>
                      <input type="number" class="form-control form-control-sm" id="rev-lmi" placeholder="0.00" step="0.01">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">Rev Mall</label>
                      <input type="number" class="form-control form-control-sm" id="rev-mall" placeholder="0.00" step="0.01">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="d-flex justify-content-end mt-3">
            <button type="submit" class="btn btn-primary px-4">
              <i class="bi bi-send"></i> Send Data
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Table Card -->
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <span><i class="bi bi-table"></i> Data Revenue</span>
        <button class="btn btn-sm btn-success" onclick="refreshData()">
          <i class="bi bi-arrow-clockwise"></i> Refresh
        </button>
      </div>
      <div class="card-body p-2">
        <div class="table-responsive">
          <table class="table table-bordered table-hover align-middle">
            <thead>
              <tr>
                <th>No</th>
                <th>Unique Key</th>
                <th>ID Cust</th>
                <th>Customer</th>
                <th>Tenant</th>
                <th>Mall</th>
                <th>Address</th>
                <th>BAST</th>
                <th>Start</th>
                <th>End</th>
                <th>Per</th>
                <th>Price</th>
                <th>Month</th>
                <th>Status</th>
                <th>Payment</th>
                <th>Rev LMI</th>
                <th>Rev Mall</th>
                <th>ACtions</th>
              </tr>
            </thead>
            <tbody id="table-body">
              <tr><td colspan="18" class="text-center py-4">Loading...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>

  <!-- Modal Edit -->
  <div class="modal fade" id="editModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title"><i class="bi bi-pencil-square"></i> Edit Data</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="edit-id">
          <div class="row g-2">
            <div class="col-md-6">
              <label class="form-label">Unique Key</label>
              <input type="text" class="form-control" id="edit-unique-id" readonly>
            </div>
            <div class="col-md-6">
              <label class="form-label">ID Customer</label>
              <input type="text" class="form-control" id="edit-id-customer">
            </div>
            <div class="col-md-6">
              <label class="form-label">Customer Name</label>
              <input type="text" class="form-control" id="edit-customer-name">
            </div>
            <div class="col-md-6">
              <label class="form-label">Tenant Name</label>
              <input type="text" class="form-control" id="edit-tenant-name">
            </div>
            <div class="col-md-6">
              <label class="form-label">Mall Name</label>
              <input type="text" class="form-control" id="edit-mall-name">
            </div>
            <div class="col-12">
              <label class="form-label">Ship Address</label>
              <textarea class="form-control" id="edit-ship-address" rows="2"></textarea>
            </div>
            <div class="col-md-4">
              <label class="form-label">Tgl WO</label>
              <input type="date" class="form-control" id="edit-tgl-wo">
            </div>
            <div class="col-md-4">
              <label class="form-label">BAST</label>
              <input type="date" class="form-control" id="edit-bast-date">
            </div>
            <div class="col-md-4">
              <label class="form-label">Status</label>
              <select class="form-select" id="edit-status">
                <option value="">-</option>
                <option value="Posted">Posted</option>
                <option value="Not Posted">Not Posted</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Start</label>
              <input type="date" class="form-control" id="edit-start">
            </div>
            <div class="col-md-3">
              <label class="form-label">End</label>
              <input type="date" class="form-control" id="edit-end">
            </div>
            <div class="col-md-3">
              <label class="form-label">Period</label>
              <input type="number" class="form-control" id="edit-period">
            </div>
            <div class="col-md-3">
              <label class="form-label">Price</label>
              <input type="number" class="form-control" id="edit-price">
            </div>
            <div class="col-md-6">
              <label class="form-label">Month</label>
              <input type="text" class="form-control" id="edit-month">
            </div>
            <div class="col-md-6">
              <label class="form-label">Payment</label>
              <select class="form-select" id="edit-status-payment">
                <option value="">-</option>
                <option value="Paid">Paid</option>
                <option value="Unpaid">Unpaid</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label">Rev LMI</label>
              <input type="number" class="form-control" id="edit-rev-lmi" step="0.01">
            </div>
            <div class="col-md-6">
              <label class="form-label">Rev Mall</label>
              <input type="number" class="form-control" id="edit-rev-mall" step="0.01">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="button" class="btn btn-primary" onclick="saveEdit()">Simpan</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Custom Script -->
  <script src="/js/script.js"></script>
</body>
</html>